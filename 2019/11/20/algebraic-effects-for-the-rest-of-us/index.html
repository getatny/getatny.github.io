<!DOCTYPE html><html class="theme-next muse use-motion han-la" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.ico?v=5.1.4"><link rel="mask-icon" href="/images/apple-touch-icon-next.png?v=5.1.4" color="#222"><meta name="keywords" content="Translate,React,Javascript,"><meta name="description" content="è‹±æ–‡åŸæ–‡ï¼šAlgebraic Effects for the Rest of Usä½ ä¹‹å‰å¬è¿‡è¯´â€œä»£æ•°æ•ˆåº”â€ï¼ˆAlgebraic Effectsï¼‰å—ï¼Ÿæˆ‘ä¹‹å‰æ›¾å°è¯•ç€å»ææ¸…æ¥šä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ä»¥åŠæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å…³æ³¨å®ƒï¼Œä½†æ˜¯å¤±è´¥äº†ã€‚æˆ‘æ‰¾åˆ°äº†ä¸€äº›pdfï¼Œä½†æ˜¯è¿™äº›ä¸œåè€Œè®©æˆ‘æ›´è¿·æƒ‘äº†ã€‚ï¼ˆæœ‰ä¸€äº›å­¦æ ¡çš„pdfçœ‹çš„æˆ‘æƒ³ç¡è§‰ï¼‰ä½†æ˜¯æˆ‘çš„åŒäº‹ Sebastian ä¸€ç›´æ¨èæŠŠå®ƒä½œä¸ºåœ¨å¼€å‘Reactæ—¶çš„å¿ƒæ™ºæ¨¡å‹ã€‚ï¼ˆSebasti"><meta name="keywords" content="Translate,React,Javascript"><meta property="og:type" content="article"><meta property="og:title" content="ç¿»è¯‘ | ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰"><meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;11&#x2F;20&#x2F;algebraic-effects-for-the-rest-of-us&#x2F;index.html"><meta property="og:site_name" content="Getatny"><meta property="og:description" content="è‹±æ–‡åŸæ–‡ï¼šAlgebraic Effects for the Rest of Usä½ ä¹‹å‰å¬è¿‡è¯´â€œä»£æ•°æ•ˆåº”â€ï¼ˆAlgebraic Effectsï¼‰å—ï¼Ÿæˆ‘ä¹‹å‰æ›¾å°è¯•ç€å»ææ¸…æ¥šä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ä»¥åŠæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å…³æ³¨å®ƒï¼Œä½†æ˜¯å¤±è´¥äº†ã€‚æˆ‘æ‰¾åˆ°äº†ä¸€äº›pdfï¼Œä½†æ˜¯è¿™äº›ä¸œåè€Œè®©æˆ‘æ›´è¿·æƒ‘äº†ã€‚ï¼ˆæœ‰ä¸€äº›å­¦æ ¡çš„pdfçœ‹çš„æˆ‘æƒ³ç¡è§‰ï¼‰ä½†æ˜¯æˆ‘çš„åŒäº‹ Sebastian ä¸€ç›´æ¨èæŠŠå®ƒä½œä¸ºåœ¨å¼€å‘Reactæ—¶çš„å¿ƒæ™ºæ¨¡å‹ã€‚ï¼ˆSebasti"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https:&#x2F;&#x2F;s2.ax1x.com&#x2F;2019&#x2F;11&#x2F;20&#x2F;MWSbVO.jpg"><meta property="og:updated_time" content="2019-12-03T05:43:55.668Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https:&#x2F;&#x2F;s2.ax1x.com&#x2F;2019&#x2F;11&#x2F;20&#x2F;MWSbVO.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},emojis:{className:"github-emoji"}}</script><link rel="canonical" href="http://yoursite.com/2019/11/20/algebraic-effects-for-the-rest-of-us/"><link href="/highlight/night-eighties.min.css?v=5.1.4" rel="stylesheet" type="text/css"><style>html.han-la hanla:after{content:" ";display:inline;font-family:Arial;font-size:.89em}html.han-la code hanla,html.han-la kbd hanla,html.han-la pre hanla,html.han-la samp hanla{display:none}html.han-la ol>hanla,html.han-la ul>hanla{display:none}</style><title>ç¿»è¯‘ | ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰ | Getatny</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Getatny</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">All the wind hold by my arms.</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/20/algebraic-effects-for-the-rest-of-us/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Matthew Wang"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Getatny"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ç¿»è¯‘ | ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-20T09:44:23+00:00">2019-11-20 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Front-end/" itemprop="url" rel="index"><span itemprop="name">Front-end</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>è‹±æ–‡åŸæ–‡ï¼š<a href="https://https://overreacted.io/algebraic-effects-for-the-rest-of-us/" target="_blank" rel="noopener">Algebraic Effects for the Rest of Us</a></p></blockquote><p>ä½ ä¹‹å‰å¬è¿‡è¯´â€œä»£æ•°æ•ˆåº”â€ï¼ˆAlgebraic Effectsï¼‰å—ï¼Ÿ</p><p>æˆ‘ä¹‹å‰æ›¾å°è¯•ç€å»ææ¸…æ¥šä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ä»¥åŠæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å…³æ³¨å®ƒï¼Œä½†æ˜¯å¤±è´¥äº†ã€‚æˆ‘æ‰¾åˆ°äº†ä¸€äº›<a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/08/algeff-tr-2016-v2.pdf" target="_blank" rel="noopener">pdf</a>ï¼Œä½†æ˜¯è¿™äº›ä¸œåè€Œè®©æˆ‘æ›´è¿·æƒ‘äº†ã€‚ï¼ˆæœ‰ä¸€äº›å­¦æ ¡çš„pdfçœ‹çš„æˆ‘æƒ³ç¡è§‰ï¼‰</p><p>ä½†æ˜¯æˆ‘çš„åŒäº‹ Sebastian ä¸€ç›´æ¨èæŠŠå®ƒä½œä¸ºåœ¨å¼€å‘Reactæ—¶çš„å¿ƒæ™ºæ¨¡å‹ã€‚ï¼ˆSebastianåœ¨Reactå›¢é˜Ÿå·¥ä½œå¹¶ä¸”æƒ³å‡ºäº†å¾ˆå¤šideasï¼ŒåŒ…æ‹¬Hookså’ŒSuspenseï¼‰ä»æŸäº›ç‚¹æ¥è¯´ï¼Œå®ƒå·²ç»å˜æˆäº†Reactå›¢é˜Ÿå†…çš„ä¸€ä¸ªæ¢—ï¼Œæˆ‘ä»¬å¾ˆå¤šçš„å¯¹è¯éƒ½ä¼šä»¥ä¸‹å›¾ç»“æŸï¼š</p><a id="more"></a><div align="center"><p><img src="https://s2.ax1x.com/2019/11/20/MWSbVO.jpg" alt="running joke"></p></div><p>ç»“æœæ˜¯ä»£æ•°æ•ˆåº”å¹¶ä¸åƒæˆ‘ä¸€å¼€å§‹çœ‹åˆ°é‚£äº›pdfçš„æ—¶å€™ä»¥ä¸ºé‚£ä¹ˆå“äººï¼Œåè€Œæ˜¯ä¸€ä¸ªå¾ˆé…·çš„æ¦‚å¿µã€‚<strong>å¦‚æœä½ åªæ˜¯å•çº¯ä½¿ç”¨Reactçš„è¯ï¼Œå…¶å®ä¸éœ€è¦äº†è§£å®ƒ â€”- ä½†å¦‚æœä½ åƒæˆ‘ä¸€æ ·å¯¹å®ƒå¾ˆå¥½å¥‡çš„è¯ï¼Œè¯·ç»§ç»­å¾€ä¸‹è¯»ã€‚</strong></p><h2 id="ç”Ÿäº§ç¯å¢ƒè¿˜ä¸èƒ½ä½¿ç”¨å“¦"><a href="#ç”Ÿäº§ç¯å¢ƒè¿˜ä¸èƒ½ä½¿ç”¨å“¦" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒè¿˜ä¸èƒ½ä½¿ç”¨å“¦"></a>ç”Ÿäº§ç¯å¢ƒè¿˜ä¸èƒ½ä½¿ç”¨å“¦</h2><p>ä»£æ•°æ•ˆåº”æ˜¯ä¸€ä¸ªç†è®ºæ€§çš„åŠŸèƒ½ã€‚è¿™æ„å‘³ç€å®ƒä¸åƒ <code>if</code> ï¼Œå‡½æ•°ï¼Œç”šè‡³ <code>async / await</code> é‚£æ ·ï¼Œ<strong>ä½ å¯èƒ½ä¸èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒçœŸæ­£ä½¿ç”¨å®ƒã€‚</strong>å®ƒåªè¢«å°‘æ•°ä¸ºäº†æ¢ç´¢è¯¥æƒ³æ³•è€Œåˆ›å»ºçš„<a href="https://www.microsoft.com/en-us/research/project/koka/" target="_blank" rel="noopener">è¯­è¨€</a>æ‰€æ”¯æŒã€‚OCamlåœ¨ä½¿å…¶èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æœ‰æ‰€è¿›å±•ï¼Œä½†ä¹Ÿåªæ˜¯â€œ<a href="https://github.com/ocaml-multicore/ocaml-multicore/wiki" target="_blank" rel="noopener">ä»åœ¨è¿›è¡Œä¸­â€¦</a>â€ã€‚æ¢å¥è¯è¯´å°±æ˜¯<a href="https://www.youtube.com/watch?v=otCpCn0l4Wo" target="_blank" rel="noopener">ä½ ä¸èƒ½ç”¨å‘—</a>ã€‚</p><blockquote><p>ç¬”è€…ï¼šæœ‰äº›äººæåˆ°LISPè¯­è¨€æä¾›äº†ä¸€äº›<a href="https://overreacted.io/algebraic-effects-for-the-rest-of-us/#learn-more" target="_blank" rel="noopener">ç±»ä¼¼çš„ç‰¹æ€§</a>ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ä½¿ç”¨LISPçš„è¯ï¼Œä½ å¯ä»¥å°†å…¶ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šã€‚</p></blockquote><h2 id="æˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ä»£æ•°æ•ˆåº”ï¼Ÿ"><a href="#æˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ä»£æ•°æ•ˆåº”ï¼Ÿ" class="headerlink" title="æˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ä»£æ•°æ•ˆåº”ï¼Ÿ"></a>æˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ä»£æ•°æ•ˆåº”ï¼Ÿ</h2><p>æƒ³è±¡ä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ <code>goto</code> å…³é”®å­—ç¼–å†™ç¨‹åºï¼Œç„¶åæŸä¸ªäººå‘ä½ å±•ç¤ºäº† <code>if</code> å’Œ <code>for</code> è¯­å¥ã€‚æˆ–è€…å¯èƒ½ä½ æ­£åœ¨å›è°ƒåœ°ç‹±ä¸­æ— æ³•è‡ªæ‹”ï¼ŒæŸä¸ªäººå´çªç„¶å‘Šè¯‰ä½ æœ‰ <code>async / await</code>ï¼å¾ˆé…·å¯¹å§ï¼Ÿ</p><p>å¦‚æœä½ æ˜¯é‚£ç§å–œæ¬¢åœ¨æŸç§ç¼–ç¨‹æƒ³æ³•æˆä¸ºä¸»æµçš„å‰å‡ å¹´å°±å¼€å§‹å­¦ä¹ å®ƒçš„äººï¼Œç°åœ¨å¯èƒ½å°±æ˜¯ä½ å¯¹ä»£æ•°æ•ˆåº”å¼€å¥½å¥‡çš„æœ€å¥½æ—¶æœºã€‚ä½†ä¹Ÿä¸ç”¨è§‰å¾—ä½ éå¾—å­¦ä¸å¯ã€‚å®ƒå…¶å®æœ‰ç‚¹åƒåœ¨1999å¹´å»æ€è€ƒ <code>async / await</code>ã€‚</p><h2 id="é‚£ä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic-Effectsï¼‰å‘¢ï¼Ÿ"><a href="#é‚£ä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic-Effectsï¼‰å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰å‘¢ï¼Ÿ"></a>é‚£ä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰å‘¢ï¼Ÿ</h2><p>å…‰çœ‹åå­—å¯èƒ½æœ‰ä¸€ç‚¹å“äººï¼Œä½†å…¶å®å®ƒçš„æ€æƒ³æŒºç®€å•çš„ã€‚å¦‚æœä½ å¯¹ <code>try / catch</code> å—å¾ˆç†Ÿæ‚‰çš„è¯ï¼Œä½ ä¼šå¾ˆå¿«ææ¸…æ¥šä»£æ•°æ•ˆåº”çš„ã€‚</p><p>é¦–å…ˆè®©æˆ‘ä»¬æ¦‚æ‹¬ä¸‹ <code>try / catch</code>ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡½æ•°æŠ›å‡ºäº†å¼‚å¸¸ã€‚å¯èƒ½åœ¨è¯¥å‡½æ•°å’Œ <code>catch</code> å—ä¹‹é—´è¿˜æœ‰ä¸€äº›å‡½æ•°ï¼š</p><pre><code class="javascript">function getName(user) {
  let name = user.name;
  if (name === null) {
      throw new Error('A girl has no name');
  }
  return name;
}

function makeFriends(user1, user2) {
  user1.friendNames.add(getName(user2));
  user2.friendNames.add(getName(user1));
}

const arya = { name: null };
const gendry = { name: 'Gendry' };
try {
  makeFriends(arya, gendry);
} catch (err) {
  console.log("Oops, that didn't work out: ", err);
}</code></pre><p>æˆ‘ä»¬åœ¨ <code>getName</code> é‡Œé¢æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯è¯¥å¼‚å¸¸é€šè¿‡ <code>makeFriends</code> â€œå†’æ³¡â€è¢«æœ€è¿‘çš„ <code>catch</code> å—æ•è·ï¼Œè¿™æ˜¯ <code>try / catch</code> çš„ä¸€ä¸ªé‡è¦ä½œç”¨ã€‚<strong>åœ¨ä¸­é—´çš„éƒ¨åˆ†ä¸éœ€è¦è‡ªå·±å»è€ƒè™‘æ€ä¹ˆå¤„ç†errorã€‚</strong></p><p>ä¸åƒCè¯­è¨€ä¸­å¤„ç†errorçš„ä»£ç ï¼Œé€šè¿‡ <code>try / catch</code>ï¼Œä½ ä¸éœ€è¦å› ä¸ºå®³æ€•ä¸¢å¤±errorè€Œåœ¨æ¯ä¸€ä¸ªä¸­é—´å±‚æ‰‹åŠ¨çš„ä¼ é€’å®ƒä»¬ã€‚ä»–ä»¬è‡ªå·±ä¼šè‡ªåŠ¨åœ°è¿›è¡Œä¼ é€’ã€‚</p><h2 id="è¿™ä¸ä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"><a href="#è¿™ä¸ä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ" class="headerlink" title="è¿™ä¸ä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"></a>è¿™ä¸ä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h2><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸€æ—¦å‡ºç°é”™è¯¯ï¼Œç¨‹åºå°†ä¸å†ç»§ç»­æ‰§è¡Œã€‚å½“ <code>catch</code> å—ä¸­çš„ä»£ç æ‰§è¡Œå®Œä¹‹åï¼Œæ²¡æœ‰ä»»ä½•åŠæ³•èƒ½è®©æˆ‘ä»¬ç»§ç»­æ‰§è¡Œå¤„å¤„å‡ºé”™æ—¶çš„ä»£ç ã€‚</p><p>æˆ‘ä»¬èƒ½åšçš„å°±æ˜¯ä»é”™è¯¯ä¸­æ¢å¤è¿‡æ¥å¹¶ä½¿ç”¨æŸç§æ–¹æ³•é‡è¯•æˆ‘ä»¬ä¹‹å‰æƒ³è¦åšçš„ï¼Œå´ä¸èƒ½é­”æ³•èˆ¬åœ°â€œå›åˆ°â€æˆ‘ä»¬å‘ç”Ÿé”™è¯¯çš„æ—¶åˆ»å»åšä¸€äº›å’Œä¹‹å‰ä¸åŒçš„äº‹å„¿ã€‚ä½†æ˜¯æœ‰äº†ä»£æ•°æ•ˆåº”ï¼ŒWe canï¼</p><p>ä¸‹é¢æ—¶ä¸€ä¸ªç”¨å‡è®¾çš„javascriptä¼ªä»£ç ç¼–å†™çš„ä¾‹å­ï¼ˆè®©æˆ‘ä»¬å¨±ä¹æ€§çš„å°†å…¶ç§°ä¸ºES2025çš„è¯­æ³•ï¼‰ï¼Œè¯¥è¯­æ³•è®©æˆ‘ä»¬å¯ä»¥ä»ä¸¢å¤± <code>user.name</code> çš„æ—¶åˆ»æ¢å¤ï¼š</p><pre><code class="js">function getName(user) {
  let name = user.name;
  if (name === null) {
      name = perform 'ask_name'; // important
  }
  return name;
}

function makeFriends(user1, user2) {
  user1.friendNames.add(getName(user2));
  user2.friendNames.add(getName(user1));
}

const arya = { name: null };
const gendry = { name: 'Gendry' };
try {
  makeFriends(arya, gendry);
} handle (effect) {
  if (effect === 'ask_name') { // important
      resume with 'Arya Stark'; // important
  }
}</code></pre><p>ï¼ˆæˆ‘å‘æ‰€æœ‰åœ¨2025å¹´é€šè¿‡æœç´¢â€œES2025â€å…³é”®å­—æ‰¾åˆ°è¿™ç¯‡æ–‡ç« çš„è¯»è€…é“æ­‰ï¼Œå¦‚æœä»£æ•°æ•ˆåº”åˆ°æ—¶å€™å·²ç»ç§°ä¸ºJavaScriptçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘å°†å¾ˆä¹æ„å»æ›´æ–°è¯¥æ–‡ç« ï¼ï¼‰</p><p>æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå‡è®¾çš„å…³é”®å­— <code>perform</code> å»æ›¿ä»£ <code>throw</code>ï¼Œç±»ä¼¼çš„ï¼Œä½¿ç”¨å‡è®¾çš„ <code>try / handle</code> æ›¿ä»£ <code>try / catch</code> ã€‚<strong>è¯¥è¯­æ³•çš„å‡†ç¡®å†™æ³•åœ¨è¿™é‡Œå¹¶ä¸é‡è¦ â€”- æˆ‘åªæ˜¯æƒ³é€šè¿‡æŸäº›ä¸œè¥¿å»è§£é‡Šä»£æ•°æ•ˆåº”çš„æ€æƒ³ã€‚</strong></p><p>æ‰€ä»¥ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹ã€‚</p><p>æˆ‘ä»¬ <code>perform</code> äº†ä¸€ä¸ªæ•ˆåº”ï¼ˆeffectï¼‰è€Œä¸æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ˆerrorï¼‰ã€‚å°±åƒæˆ‘ä»¬å¯ä»¥æŠ›å‡ºä»»ä½•å€¼ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ é€’ä»»ä½•å€¼ç»™ <code>perform</code>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä¼ é€’æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†ä½ å®Œå…¨å¯ä»¥ä¼ é€’ä¸€ä¸ªå¯¹è±¡æˆ–ä»»ä½•å…¶ä»–çš„æ•°æ®ç±»å‹ï¼š</p><pre><code class="js">function getName(user) {
  let name = user.name;
  if (name === null) {
      name = perform 'ask_name'; // important
  }
  return name;
}</code></pre><p>å½“æˆ‘ä»¬æŠ›å‡ºä¸€ä¸ªé”™è¯¯çš„æ—¶å€™ï¼Œå¼•æ“ä¼šé€šè¿‡è°ƒç”¨æ ˆå»æŸ¥æ‰¾æœ€è¿‘çš„ä¸€ä¸ª <code>try / catch</code> å¼‚å¸¸å¤„ç†å—ã€‚æˆ‘ä»¬ <code>perform</code> ä¸€ä¸ªæ•ˆåº”çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¼•æ“å°†ä¼šåœ¨è°ƒç”¨æ ˆä¸­æœç´¢æœ€è¿‘çš„ <code>try / handle</code> æ•ˆåº”å¤„ç†å—ï¼š</p><pre><code class="js">try {
  makeFriends(arya, gendry);
} handle (effect) { // important
  if (effect === 'ask_name') {
      resume with 'Arya Stark';
  }
}</code></pre><p>è¿™ä¸ª <code>effect</code> å¯ä»¥è®©æˆ‘ä»¬è‡ªå·±å†³å®šæ€ä¹ˆå»å¤„ç†å§“åä¸¢å¤±çš„æƒ…å†µï¼Œæœ‰è¶£çš„åœ°æ–¹åœ¨äºå‡å®šçš„ <code>resume with</code>ï¼ˆç›¸è¾ƒäºå¼‚å¸¸æ¥è¯´ï¼‰ï¼š</p><pre><code class="js">try {
  makeFriends(arya, gendry);
} handle (effect) {
  if (effect === 'ask_name') {
      resume with 'Arya Stark'; // important
  }
}</code></pre><p>è¿™æ˜¯ <code>try / catch</code> æ‰€åšä¸åˆ°çš„ã€‚å®ƒä½¿æˆ‘ä»¬<strong>è·³å›æˆ‘ä»¬performæ•ˆåº”çš„æ—¶åˆ»ï¼Œå¹¶ä»handlerä¼ é€’ä¸€äº›å†…å®¹ç»™å®ƒã€‚</strong> <span class="github-emoji" style="color:transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f62f.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62f.png?v8">ğŸ˜¯</span></p><pre><code class="js">function getName(user) {
  let name = user.name;
  if (name === null) {
      // 1. æˆ‘ä»¬åœ¨è¿™å„¿performäº†ä¸€ä¸ªæ•ˆåº”
      name = perform 'ask_name';
      // 4. ...handlerä»£ç æ‰§è¡Œç»“æŸä¹‹åä¼šå›åˆ°è¿™å„¿ï¼Œç°åœ¨ name çš„å€¼ä¸º'Arya Stark'
  }
  return name;
}

// ...

try {
  makeFriends(arya, gendry);
} handle (effect) {
  // 2. é€šè¿‡å¼•æ“æ‰¾åˆ°æœ€è¿‘çš„ try / handleï¼Œæˆ‘ä»¬å°†è·³åˆ°è¿™é‡Œï¼ˆå°±åƒ try / catch çš„é€»è¾‘ä¸€æ ·ï¼‰
  if (effect === 'ask_name') {
      // 3. å’Œ try / catch ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡resumeæ¢å¤ï¼Œå¹¶å‘å…¶ä¼ é€’ä¸€äº›å€¼
      resume with 'Arya Stark';
  }
}</code></pre><p>éœ€è¦ä¸€ç‚¹æ—¶é—´å»é€‚åº”è¿™äº›å˜åŒ–ï¼Œä½†ä»æ¦‚å¿µä¸Šæ¥è®²å®ƒå’Œå¯æ¢å¤çš„ <code>try / catch</code> çœŸçš„æ²¡å¤šå¤§çš„åŒºåˆ«ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ä»£æ•°æ•ˆåº”æ¯” try / catch è¦çµæ´»å¤ªå¤šäº†ï¼Œå¹¶ä¸”â€œé”™è¯¯æ¢å¤â€åªæ˜¯å®ƒä¼—å¤šå¯èƒ½çš„ä½¿ç”¨åœºæ™¯ä¸­çš„ä¸€ä¸ªã€‚</strong>æˆ‘ä»¥â€œé”™è¯¯æ¢å¤â€ä¸ºä¾‹åªæ˜¯å› ä¸ºæˆ‘è§‰å¾—å®ƒæ¯”è¾ƒå®¹æ˜“å›Šæ‹¬æˆ‘å…³äºå®ƒæƒ³è¦æè¿°çš„ä¸œè¥¿ã€‚</p><h2 id="å‡½æ•°æ²¡æœ‰â€œé¢œè‰²â€"><a href="#å‡½æ•°æ²¡æœ‰â€œé¢œè‰²â€" class="headerlink" title="å‡½æ•°æ²¡æœ‰â€œé¢œè‰²â€"></a>å‡½æ•°æ²¡æœ‰â€œé¢œè‰²â€</h2><p>ä»£æ•°æ•ˆåº”å¯¹äºå¼‚æ­¥ä»£ç æ¥è¯´æœ‰ç€æœ‰è¶£çš„å«ä¹‰ã€‚</p><p>å¯¹äºæ‹¥æœ‰ <code>async / await</code> è¯­æ³•çš„ç¼–ç¨‹è¯­è¨€æ¥è¯´ï¼Œ<a href="https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/" target="_blank" rel="noopener">å‡½æ•°é€šå¸¸æœ‰â€œé¢œè‰²â€</a>ã€‚ä¸¾ä¸ªæ —å­ï¼Œåœ¨JavaScriptä¸­ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä¸æ„ŸæŸ“ <code>makeFriends</code> å‡½æ•°åŠå…¶è°ƒç”¨è€…ï¼Œä½¿å…¶æˆä¸ºå¼‚æ­¥å‡½æ•°çš„æƒ…å†µä¸‹å°† <code>getName</code> å‡½æ•°ä¿®æ”¹ä¸ºå¼‚æ­¥å‡½æ•°ã€‚è¿™åœ¨æŸäº›ä»£ç éœ€è¦åŒæ­¥ï¼Œè€Œå¦ä¸€äº›ä»£ç éœ€è¦å¼‚æ­¥çš„æ—¶å€™çœŸçš„å¾ˆç—›è‹¦ã€‚</p><pre><code class="js">// å¦‚æœä½ æƒ³æŠŠè¯¥å‡½æ•°æ”¹ä¸ºå¼‚æ­¥å‡½æ•°çš„è¯
async getName(user) {
  // ...
}

// è¿™ä¸ªå‡½æ•°ä¹Ÿå¾—ä¿®æ”¹ä¸ºå¼‚æ­¥å‡½æ•°
async function makeFriends(user1, user2) {
  user1.friendNames.add(await getName(user2));
  user2.friendNames.add(await getName(user1));
}

// makeFriends å‡½æ•°çš„è°ƒç”¨è€…ä¹Ÿæ˜¯å¦‚æ­¤</code></pre><p>JavaScript generatorsä¹Ÿæ˜¯<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="noopener">ç±»ä¼¼</a>çš„ï¼šå¦‚æœä½ ä½¿ç”¨äº†generatorsï¼Œé‚£ä¹ˆä¸­é—´ç›¸å…³çš„ä¸œè¥¿ä¹Ÿéœ€è¦æ³¨æ„generatorsã€‚</p><p>é‚£ä¹ˆï¼Œè¿™åˆå’Œä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p><p>è®©æˆ‘ä»¬å¿˜æ‰ <code>async / await</code> å›åˆ°æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼š</p><pre><code class="js">function getName(user) {
  let name = user.name;
  if (name === null) {
      name = perform 'ask_name'; // important
  }
  return name;
}

function makeFriends(user1, user2) {
  user1.friendNames.add(getName(user2));
  user2.friendNames.add(getName(user1));
}

const arya = { name: null };
const gendry = { name: 'Gendry' };
try {
  makeFriends(arya, gendry);
} handle (effect) {
  if (effect === 'ask_name') { // important
      resume with 'Arya Stark'; // important
  }
}</code></pre><p>å¦‚æœeffect handlerä¸èƒ½åŒæ­¥åœ°çŸ¥é“â€œå¤‡ç”¨å§“åâ€æ€ä¹ˆåŠï¼Ÿå¦‚æœæˆ‘ä»¬æƒ³è¦ä»æŸä¸ªæ•°æ®åº“ä¸­è·å–å§“åå‘¢ï¼Ÿ</p><p>ç»“æœæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨effect handlerä¸­å¼‚æ­¥åœ°è°ƒç”¨ <code>resume with</code> å¹¶ä¸”ä¸éœ€è¦å¯¹ <code>getName</code> æˆ– <code>nakeFriends</code> å‡½æ•°åšä»»ä½•çš„æ”¹åŠ¨ï¼š</p><pre><code class="js">function getName(user) {
  let name = user.name;
  if (name === null) {
      name = perform 'ask_name';
  }
  return name;
}

function makeFriends(user1, user2) {
  user1.friendNames.add(getName(user2));
  user2.friendNames.add(getName(user1));
}

const arya = { name: null };
const gendry = { name: 'Gendry' };
try {
  makeFriends(arya, gendry);
} handle (effect) {
  if (effect === 'ask_name') { // important
      setTimeout(() =&gt; { // important
      resume with 'Arya Stark'; // important
      }, 1000); // important
  }
}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ç§’é’Ÿä¹‹åæ‰è°ƒç”¨ <code>resume with</code>ã€‚ä½ å¯ä»¥æŠŠ <code>resume with</code> æƒ³è±¡æˆå€¼è°ƒç”¨ä¸€æ¬¡çš„å›è°ƒå‡½æ•°ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥å°†å…¶ç§°ä½œâ€œone-shot delimited continuationâ€ç»™ä½ çš„æœ‹å‹ç•™ä¸‹æ·±åˆ»å°è±¡ã€‚<del>ç¿»è¯‘æ— èƒ½</del>ï¼‰</p><p>ç°åœ¨ï¼Œä»£æ•°æ•ˆåº”çš„å·¥ä½œåŸç†åº”è¯¥æ›´æ¸…æ™°ä¸€äº›äº†ã€‚å½“æˆ‘ä»¬æŠ›å‡ºä¸€ä¸ªé”™è¯¯çš„æ—¶å€™ï¼ŒJavaScriptå¼•æ“ä¼šâ€œé‡Šæ”¾æ ˆâ€ï¼Œä»è¿›ç¨‹ä¸­é”€æ¯æœ¬åœ°å˜é‡ã€‚è€Œå½“æˆ‘ä»¬ <code>perfofm</code> ä¸€ä¸ªæ•ˆåº”çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‡å®šçš„å¼•æ“å°†ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æˆ‘ä»¬ä½™ä¸‹å‡½æ•°çš„å›è°ƒï¼Œå¹¶é€šè¿‡ <code>resume with</code> è°ƒç”¨å®ƒã€‚</p><p><strong>å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼šæœ¬æ–‡ä¸­ä½¿ç”¨çš„ä»»ä½•å…³äºä»£æ•°æ•ˆåº”çš„è¯­æ³•å’Œå…³é”®å­—éƒ½æ˜¯è™šæ„çš„ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯å…³é”®ç‚¹ï¼Œå…³é”®ç‚¹åœ¨äºä»£æ•°æ•ˆåº”çš„æ€æƒ³åŠå·¥ä½œåŸç†ã€‚</strong></p><h2 id="å…³äºâ€œçº¯â€"><a href="#å…³äºâ€œçº¯â€" class="headerlink" title="å…³äºâ€œçº¯â€"></a>å…³äºâ€œçº¯â€</h2><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä»£æ•°æ•ˆåº”æ¦‚å¿µæ¥è‡ªäºå‡½æ•°å¼ç¼–ç¨‹ç ”ç©¶ï¼Œæ‰€ä»¥å®ƒè§£å†³çš„æŸäº›é—®é¢˜æ˜¯ç‰¹å®šäºçº¯å‡½æ•°ç¼–ç¨‹çš„ã€‚ä¸¾ä¸ªæ —å­ï¼Œåœ¨ä¸å…è®¸ä»»ä½•å‰¯ä½œç”¨çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼ˆå¦‚Haskellï¼‰ï¼Œä½ éœ€è¦é€šè¿‡ä½¿ç”¨åƒMonadsä¸€ç±»çš„é¢æ¦‚å¿µæ¥ç¼–å†™å‡½æ•°ï¼Œå¦‚æœä½ ä»¥å‰é˜…è¯»è¿‡Monadsçš„æ•™ç¨‹çš„è¯ï¼Œä½ åº”è¯¥çŸ¥é“å®ƒçš„æ¦‚å¿µæ˜¯æœ‰ä¸€ç‚¹éš¾ç†è§£çš„ã€‚è€Œä»£æ•°æ•ˆåº”èƒ½åœ¨è¾ƒå°‘çš„ä»£ä»·ä¸‹å®ç°ç±»ä¼¼çš„ä¸œè¥¿ã€‚</p><p>è¿™ä¹Ÿæ­£æ˜¯å¾ˆå¤šå…³äºä»£æ•°æ•ˆåº”çš„è®¨è®ºå¯¹æˆ‘æ¥è¯´éš¾ä»¥ç†è§£çš„åŸå› ã€‚ï¼ˆæˆ‘<a href="https://overreacted.io/things-i-dont-know-as-of-2018/" target="_blank" rel="noopener">ä¸äº†è§£</a>Haskellå’Œæœ‹å‹<del>ï¼ˆï¼Ÿï¼‰</del>ï¼‰ä½†ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘è¿˜æ˜¯è§‰å¾—å³ä¾¿æ˜¯åœ¨åƒJavaScriptè¿™æ ·ä¸é‚£ä¹ˆâ€œçº¯â€çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œ<strong>ä»£æ•°æ•ˆåº”ä¹Ÿæ˜¯åœ¨ä»£ç ä¸­åˆ†ç±»å†…å®¹å’Œæ–¹æ³•çš„å¼ºå¤§å·¥å…·ã€‚</strong></p><p>å®ƒä½¿å¾—ä½ èƒ½å¤Ÿæ›´ä¸“æ³¨äºä½ æ­£åœ¨åšçš„äº‹æƒ…ï¼š</p><pre><code class="js">function enumerateFiles(dir) {
  const contents = perform OpenDirectory(dir); // important
  perform Log('Enumerating files in ', dir); // important
  for (let file of contents.files) {
      perform HandleFile(file); // important
  }
  perform Log('Enumerating subdirectories in ', dir); // important
  for (let directory of contents.dir) {
      // æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€’å½’æˆ–å…¶ä»–å¸¦æœ‰æ•ˆåº”çš„å‡½æ•°
      enumerateFiles(directory);
  }
  perform Log('Done'); // important
}</code></pre><p>ç„¶åå†ç”¨å…·ä½“æ€ä¹ˆå»å¤„ç†çš„æ–¹æ³•åŒ…è£¹å®ƒï¼š</p><pre><code class="js">let files = [];
try {
  enumerateFiles('C:\\');
} handle (effect) {
  if (effect instanceof Log) {
      myLoggingLibrary.log(effect.message); // important
      resume; // // important
  } else if (effect instanceof OpenDirectory) {
      myFileSystemImpl.openDir(effect.dirName, (contents) =&gt; { // important
      resume with contents; // important
      }); // important
  } else if (effect instanceof HandleFile) {
    files.push(effect.fileName); // important
    resume; // important
  }
}
// 'files' æ•°ç»„ç°åœ¨åŒ…å«äº†æ‰€æœ‰çš„æ–‡ä»¶</code></pre><p>è¿™æ„å‘³ç€è¿™äº›å¤„ç†ç‰‡æ®µç”šè‡³å¯ä»¥ç±»åº“åŒ–ï¼š</p><pre><code class="js">import { withMyLoggingLibrary } from 'my-log';
import { withMyFileSystem } from 'my-fs';

function ourProgram() {
  enumerateFiles('C:\\');
}

withMyLoggingLibrary(() =&gt; {
  withMyFileSystem(() =&gt; {
    ourProgram();
  });
});</code></pre><p>å’Œ <code>async / await</code> æˆ– Generators ä¸å¤ªä¸€æ ·çš„æ˜¯ï¼Œä»£æ•°æ•ˆåº”å¹¶ä¸éœ€è¦å¤æ‚çš„â€œä¸­é—´â€å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <code>onProgram</code> å‡½æ•°çš„ä»»ä½•å±‚çº§è°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„ <code>enumerateFiles</code> å‡½æ•°ï¼Œåªè¦åœ¨ä¸Šå±‚ä»»æ„åœ°æ–¹æœ‰ä¸€ä¸ªeffect handlerï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªeffectå°±éƒ½ä¼šè¢«performï¼Œæˆ‘ä»¬çš„ä»£ç å°±å¯ä»¥æ­£å¸¸è¿ä½œã€‚</p><p>Effect handlerè®©ç¨‹åºé€»è¾‘åœ¨ä¸èŠ±è´¹å¤ªå¤šä»£ä»·æˆ–ç¼–å†™æ ·æ¿ä»£ç çš„æƒ…å†µä¸‹ä¸å®ƒå®é™…çš„effectå®ç°è§£è€¦ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ä¸­ä½¿ç”¨è™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿå»å®Œå…¨é‡å†™ä¿ç•™logçš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯ä»…ä»…æŠŠå®ƒä»¬æ‰“å°åˆ°æ§åˆ¶å°ã€‚</p><pre><code class="js">import { withFakeFileSystem } from 'fake-fs';

function withLogSnapshot(fn) {
  let logs = [];
  try {
      fn();
  } handle (effect) {
      if (effect instanceof Log) {
        logs.push(effect.message);
        resume;
      }
  }
  // Snapshot emitted logs.
  expect(logs).toMatchSnapshot();
}

test('my program', () =&gt; {
  const fakeFiles = [/* ... */];
  withFakeFileSystem(fakeFiles, () =&gt; { // important
      withLogSnapshot(() =&gt; { // important
      ourProgram(); // important
      }); // important
  }); // important
});</code></pre><p>å› ä¸ºè¿™é‡Œæ²¡æœ‰ä»»ä½•çš„â€œå‡½æ•°æ ‡å¿—â€ï¼ˆä¸­é—´çš„ä»£ç ä¸éœ€è¦åœ¨æ„effectsï¼‰å¹¶ä¸”effect handleræ˜¯å¯ç»„åˆçš„ï¼ˆä½ å¯ä»¥åµŒå¥—ä»–ä»¬ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨å®ƒä»¬æ¥åˆ›å»ºæå…·è¡¨ç°åŠ›çš„æŠ½è±¡å‡½æ•°ã€‚</p><h2 id="å…³äºç±»å‹"><a href="#å…³äºç±»å‹" class="headerlink" title="å…³äºç±»å‹"></a>å…³äºç±»å‹</h2><p>å› ä¸ºä»£æ•°æ•ˆåº”æºè‡ªäºé™æ€ç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥å…³äºå®ƒçš„å¾ˆå¤šäº‰è®ºéƒ½å›´ç»•ç€å®ƒåœ¨ç±»å‹ä¸­çš„è¡¨è¾¾æ–¹å¼ã€‚è¿™è‚¯å®šæ˜¯æ¯«æ— ç–‘é—®çš„ï¼Œä½†åŒæ—¶ä¹Ÿä½¿å¾—æŒæ¡å®ƒçš„æ¦‚å¿µæˆä¸ºäº†ä¸€ç§æŒ‘æˆ˜ã€‚ä¹Ÿæ­£æ˜¯ç”±äºè¿™ä¸ªåŸå› ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« å®Œå…¨æ²¡æœ‰æåˆ°ç±»å‹ã€‚ä½†æ˜¯ï¼æˆ‘éœ€è¦æé†’ä½ çš„æ˜¯ï¼Œäº‹å®ä¸Šä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ•ˆæœçš„å‡½æ•°éƒ½ä¼šè¢«ç¼–ç æˆå®ƒçš„ç±»å‹ç­¾åã€‚å› æ­¤ä½ ä¸åº”è¯¥é™·å…¥effectséšæœºå‘ç”Ÿå¹¶ä¸”ä½ æ— æ³•ç¡®å®šå®ƒä»å“ªå„¿å‡ºç°çš„æƒ…å†µã€‚<del>ï¼ˆä¸æ‡‚ï¼‰</del></p><p>ä½ å¯èƒ½ä¼šäº‰è®ºè¯´ä»£æ•°æ•ˆåº”æŠ€æœ¯ä¸Šæ¥è¯´åœ¨é™æ€ç±»å‹è¯­è¨€ä¸­æ˜¯ç»™å‡½æ•°æ‰“ä¸Šâ€œæ ‡è®°â€äº†çš„ï¼Œå› ä¸ºeffectæ­£å¼ç±»å‹ç­¾åçš„ä¸€éƒ¨åˆ†ï¼è¿™æ ·çš„è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ä¿®å¤ä¸­é—´å‡½æ•°çš„ç±»å‹æ³¨é‡Šä»¥åŒ…æ‹¬æ–°çš„æ•ˆæœæœ¬èº«å¹¶ä¸æ˜¯è¯­ä¹‰ä¸Šçš„æ›´æ”¹ â€”- ä¸æ·»åŠ  <code>async</code> æˆ–å°†ä¸€ä¸ªå‡½æ•°è½¬æ¢ä¸º <code>generator</code> ä¸åŒã€‚ç»“è®ºä¹Ÿå¯ä»¥å¸®åŠ©é¿å…çº§è”æ›´æ”¹ã€‚ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªnoopæˆ–ä¸€ä¸ªè™šæ‹Ÿçš„å®ç°å»â€œå¢å¼ºâ€effectï¼ˆä¾‹å¦‚åŒæ­¥çš„å»è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼‰ï¼Œè¿™ä½¿ä½ å¯ä»¥åœ¨å¿…è¦æ—¶é˜»æ­¢å…¶åˆ°è¾¾å¤–éƒ¨ä»£ç ï¼Œæˆ–å°†å…¶è½¬æ¢ä¸ºä¸åŒçš„effectã€‚</p><blockquote><p>æœªå®Œå¾…ç»­</p></blockquote><script>document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });</script></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Translate/" rel="tag"># Translate</a> <a href="/tags/React/" rel="tag"># React</a> <a href="/tags/Javascript/" rel="tag"># Javascript</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/10/31/use-github-page-and-travis-to-build-your-blog/" rel="next" title="ä½¿ç”¨Github page + Travisæ„å»ºä½ çš„ä¸ªäººåšå®¢"><i class="fa fa-chevron-left"></i> ä½¿ç”¨Github page + Travisæ„å»ºä½ çš„ä¸ªäººåšå®¢</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/11/25/linger-open-source/" rel="prev" title="Linger - åˆä¸€ä¸ªéŸ³ä¹æ–‡å­—ç±»å¾®ä¿¡å°ç¨‹åº">Linger - åˆä¸€ä¸ªéŸ³ä¹æ–‡å­—ç±»å¾®ä¿¡å°ç¨‹åº <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="gitalk-container"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Matthew Wang"><p class="site-author-name" itemprop="name">Matthew Wang</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/%7C%7C%20archive"><span class="site-state-item-count">5</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">8</span> <span class="site-state-item-name">tags</span></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/getatny" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:wangmaozhu@foxmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ç”Ÿäº§ç¯å¢ƒè¿˜ä¸èƒ½ä½¿ç”¨å“¦"><span class="nav-number">1.</span> <span class="nav-text">ç”Ÿäº§ç¯å¢ƒè¿˜ä¸èƒ½ä½¿ç”¨å“¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ä»£æ•°æ•ˆåº”ï¼Ÿ"><span class="nav-number">2.</span> <span class="nav-text">æˆ‘ä¸ºä»€ä¹ˆè¦å…³æ³¨ä»£æ•°æ•ˆåº”ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é‚£ä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic-Effectsï¼‰å‘¢ï¼Ÿ"><span class="nav-number">3.</span> <span class="nav-text">é‚£ä»€ä¹ˆæ˜¯ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰å‘¢ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¿™ä¸ä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ"><span class="nav-number">4.</span> <span class="nav-text">è¿™ä¸ä»£æ•°æ•ˆåº”æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‡½æ•°æ²¡æœ‰â€œé¢œè‰²â€"><span class="nav-number">5.</span> <span class="nav-text">å‡½æ•°æ²¡æœ‰â€œé¢œè‰²â€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å…³äºâ€œçº¯â€"><span class="nav-number">6.</span> <span class="nav-text">å…³äºâ€œçº¯â€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å…³äºç±»å‹"><span class="nav-number">7.</span> <span class="nav-text">å…³äºç±»å‹</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Matthew Wang</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/text-autospace.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/highlight/pretty.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script type="text/javascript">const gitalk = new Gitalk({
        clientID: 'c8eccabe6a600b6cd5a7',
        clientSecret: '8760b3aa99494e4a89603a85f92d866c733a79a1',
        repo: 'getatny.github.io',
        owner: 'getatny',
        admin: ['getatny'],
        id: location.pathname.split('/')[4],
        distractionFreeMode: true,
        labels: ['Blog Comments'],
        createIssueManually: true
      })

      gitalk.render('gitalk-container')</script></body></html>